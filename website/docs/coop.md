# 组件数据绑定规范

> 设计器为用户提供了两种数据绑定的方式，一是使用平台的提供的数据中心，二是连接用户自己的已有数据库；

## 使用平台提供的数据中心

> 我们为每个应用提供了创建应用数据对象的功能，数据对象可以理解为一个数据集或者数据库中的一张表，我们提供了操作字段和数据的能力，用户可根据自己的需求添加字段名称及添加数据。

> 为应用创建了数据对象，才能在应用设计过程中为应用中的组件绑定动态数据。

### 数据对象创建规则

1. 添加数据对象：
     - 根据需要取一个有一定识别的名称，一个应用中不能出现两个名称相同的数据对象；
     - 应用添加玩数据对象，我们会在应用设计时为您查询出来，放在tables字段中；

    ```javascript
         tables: [
              {
                 content: [{ //数据对象的内容
                      id: 1,  // 数据的id,平台自动生成
                      title: "" //用户自定义的数据字段
                 }],
                 struct: [{ //数据对象的内容
                     column_name: "id",  //字段名称
                     data_type: "int", //字段类型
                     column_comment: "" //字段说明
                 }],//数据对象的结构
                 tableName: "" ,  //数据对象在数据库中的名称
                 title: "新建页tab选项卡"  //数据对象的标题，用户自己取的名称
              }
             ...
         ]

    ```

2. 添加字段
    - 字段名称：只能使用英文名称；
    - 字段类型：字符，整型，浮点，目前只提供了这三种，根据组件需要的数据类型来创建，使用内置组件，可先查看内置组件使用介绍；
    - 字段说明：可添加字段备注，说明字段的用处；

3. 添加数据
    - id: 为平台自动生成，无法修改和删除，且保持自增状态，每个id只会出现一次；
    - 其余字段：为用户自定义字段，根据创建字段时规定的数据类型来添加数据，同时数据类型和格式需要跟组件需要的数据格式类型统一，避免应用出错，无法加载；

### 使用方法
    - 新建一个应用；
    - 点击应用中的数据中心去设计；
    - 选择需要创建数据的数据对象，依次添加数据结构和数据内容；
    - 去设计应用，为应用的组件绑定数据对象，选中组件，在右侧组件控制区的数据绑定模块，为组件添加数据即可；

### 数据绑定映射模型--dataModel

> 每个组件都有自己的dataModel属性，存放的是组件与数据的映射关系；

   - dataModel 属性说明
          - tableName 是以字符串的形式存放组件的数据对象名称
          - tableNameSwitch 是以数字的形式存放组件的数据对象名称开关 （可不配置，默认显示）
          - mapData 是以数组的形式存放组件的所有数据映射
          - mapDataSwitch 是以数组的形式存放组件的所有数据映射的开关 （可不配置，默认显示）
          - dataCompSwitch 组件属性数据绑定关系开关 （一般不配置，特殊组件如 分类、排序组件）
```javascript
      dataModel: {
        tableName: '', // 组件绑定的数据对象名称
        // tableNameSwitch: 1, // 组件绑定的数据对象名称的开关  默认为1（显示） 0（置灰）
        mapData: [
         {
           desc: "",  //组件字段中文描述，
           key: "", //组件字段名称，
           tableMap: "" //组件绑定的数据对象映射字段
         },
         // mapDataSwitch: 1, // 组件绑定的数据映射的开关  默认为1（显示） 0（置灰）
         // dataCompSwitch: 0, // 组件属性数据绑定关系开关  默认为0（不显示） 1（显示）
         ...
        ]
      }
```

  - 自定义组件添加数据绑定功能

      - 新建一个自定义组件，上传到平台中，在线编辑组件属性；
      - 将需要绑定的数据按以上dataModel的格式设置为组件的dataModel属性；
      - 将compAttr中的dataSwitch的设为1；
      - 去应用设计页面，添加该组件，即可在右侧组件控制区为该组件绑定数据。



## 连接用户自己的库

敬请期待。。。

